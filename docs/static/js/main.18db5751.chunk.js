(this["webpackJsonpaddress-hash"]=this["webpackJsonpaddress-hash"]||[]).push([[0],{298:function(e,t,s){},314:function(e,t){},317:function(e,t){},320:function(e,t){},324:function(e,t){},349:function(e,t){},351:function(e,t){},360:function(e,t){},362:function(e,t){},372:function(e,t){},374:function(e,t){},418:function(e,t){},419:function(e,t){},492:function(e,t){},494:function(e,t){},501:function(e,t){},502:function(e,t){},604:function(e,t){},676:function(e,t,s){"use strict";s.r(t);var a=s(0),c=s.n(a),n=s(30),r=s.n(n),i=(s(297),s(298),s(688)),o=s(55),u=s(692),l=s(689),d=s(285),j=s(288),b=s(694),h=s(690),f=s(691),O=s(65),p=s(63),x=s(276),m=s(27),v=s.n(m),g=s(286),P=s.n(g),L=s(279),w=s.n(L),N="0x0000000000000000000000000000000000000000000000000000000000000000";var y=s(34),C=s(131),k=s(177),S=s(280),D=s.n(S),A=s(281),T=s.n(A);function I(e,t){var s,a=v.a.utils.hexToNumberString(function(e){return q(H(e),32)}(e)),c=new v.a.utils.BN(a),n=v.a.utils.hexToNumberString((s=t,q(H(v.a.utils.toHex(s),12),32))),r=new v.a.utils.BN(n);return"0x"+c.or(r.shrn(160)).toString(16)}function H(e,t){var s=v.a.utils.hexToBytes(e);if(!t||t===s.length)return s.concat([]);if(t<s.length)throw"Data will be lost";for(;t!=s.length;)s.unshift(0);return v.a.utils.bytesToHex(s)}function q(e,t){Array.isArray(e)||(e=v.a.utils.hexToBytes(e));var s=t-e.length;if(s<0)throw new Error("Data loss");if(0===s)return e.concat([]);var a="0".repeat(s).split("").map((function(e){return parseInt(e)})),c=e.concat(a);return v.a.utils.bytesToHex(c)}var J=s(1),R=c.a.createContext({}),B=1,F=function(e){var t=e.children,s=Object(a.useState)([{index:B,accessList:[],startDate:new Date}]),c=Object(o.a)(s,2),n=c[0],r=c[1],i=Object(a.useState)({}),u=Object(o.a)(i,2),l=u[0],d=u[1],j=Object(a.useCallback)((function(){r((function(e){return[].concat(Object(C.a)(e),[{index:++B,accessList:[],startDate:new Date}])}))}),[r]),b=Object(a.useCallback)((function(e){r((function(t){return t.filter((function(t){return t!==e}))}))}),[r]),h=Object(a.useCallback)((function(e){return n.find((function(t){return t.index===e}))}),[n]),f=Object(a.useCallback)((function(e,t){var s=n.findIndex((function(t){return t.index===e}));t.price&&(t.priceInWei=v.a.utils.toWei(t.price)),n[s]=Object(y.a)(Object(y.a)({},n[s]),t),console.log("Phase update",n[s]),r(Object(C.a)(n))}),[n]),O=Object(a.useCallback)((function(e,t){var s=h(e);s.accessList=s.accessList||[],s.accessList.push(t),f(e,{accessList:s.accessList})}),[n,h,f]),p=Object(a.useCallback)((function(e,t){var s=h(e);s.accessList=t||[],f(e,{accessList:s.accessList})}),[n,h,f]),x=Object(a.useCallback)((function(e,t){var s=h(e);s.accessList=s.accessList||[],s.accessList=s.accessList.filter((function(e){return e.id!==t})),f(e,{accessList:s.accessList})}),[n,h,f]),m=Object(a.useCallback)((function(e){var t=h(e);if(!t.price)return f(e,{warning:"Please enther the price!"}),!1;if(!t.startDate)return f(e,{warning:"Please enther correct start date!"}),!1;if(!t.isPublic){if(t.accessList.filter((function(e){return!e.address||!e.quantity})).length)return f(e,{warning:"Fill in all fields!"}),!1;var s="";if(t.accessList.forEach((function(e,t){e.warn=!1,v.a.utils.isAddress(e.address)||(s+="".concat(t+1,","),e.warn=!0)})),s.length)return f(e,{warning:"The address in row ".concat(s," is not correct.")}),!1}var a=[N],c=N,n=t.accessList,r=a;if(!t.isPublic){var i=function(e){var t=e.map((function(e){var t=e.quantity,s=e.address;return Object(y.a)(Object(y.a)({},e),{},{leafValue:I(s,t)})})),s=new T.a(t.map((function(e){return e.leafValue})),D.a,{sortPairs:!0}),a={root:"0x"+s.getRoot().toString("hex"),data:t.map((function(e,t){return Object(y.a)(Object(y.a)({},e),{},{proof:s.getHexProof(e.leafValue),proofPositional:s.getPositionalHexProof(e.leafValue,t)})}))};return console.log("results",s.toString()),console.log("results",a),a}(Object(C.a)(t.accessList));r=(n=i.data).map((function(e){return{address:e.address,quantity:e.quantity,proof:e.proof}})),c=i.root}var o=parseInt(t.startDate.getTime()/1e3);return f(e,{warning:"",accessList:n,rootHash:c,startTimestamp:o,phaseDrop:{isPublic:t.isPublic,startTimestamp:o,price:t.priceInWei,accessList:r},phaseDropStr:"[".concat(o,", ").concat(t.priceInWei,', "').concat(c,'"]')}),n}),[n,f,h]),g=Object(a.useCallback)((function(){if(n.find((function(e){return!1===m(e.index)})))alert("Invalid phase exist. Please correct it and try again.");else{var e=[],t=n.reduce((function(t,s){return t+=s.phaseDropStr+",",e.push(s.phaseDrop),t}),"[");e=e.sort((function(e,t){return e.startTimestamp-t.startTimestamp})),t=t.substring(0,t.length-1)+"]",d({dropPhasesRemixStr:t,dropPhases:e});var s=(new TextEncoder).encode(JSON.stringify(e)),a=new Blob([s],{type:"application/json;charset=utf-8"});Object(k.saveAs)(a,"access-list.json")}}),[n,h,m]),P=Object(a.useCallback)((function(e){var t=h(e);if(t.accessList&&t.accessList.length){var s=(new TextEncoder).encode(JSON.stringify(t.accessList)),a=new Blob([s],{type:"application/json;charset=utf-8"});Object(k.saveAs)(a,"access-list.json")}}),[n,h]),L=Object(a.useCallback)((function(e,t,s){var a=h(e);a.accessList=a.accessList.concat();var c=a.accessList.findIndex((function(e){return e.id==t}));a.accessList[c]=Object(y.a)(Object(y.a)({},a.accessList[c]),s);var n=a.accessList.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{leafValue:"",warn:!1,proof:!1})}));f(e,{accessList:n,rootHash:""})}),[n,h]);return Object(J.jsx)(R.Provider,{value:{phases:n,onAddPhase:j,savePhasesJSON:P,updatePhaseAccessListItem:L,onRemovePhase:b,addAddressToPhase:O,generateMercleTreeForPhase:m,setAddressesToPhase:p,updatePhase:f,phasesData:l,generateAndSaveJSON:g,removeAddressFromPhase:x},children:t})},W=function(){return c.a.useContext(R)},E={header:!1,dynamicTyping:!0,skipEmptyLines:!0},V=function(e){var t=e.phase;window.web3=v.a;var s=W(),c=s.addAddressToPhase,n=s.removeAddressFromPhase,r=s.setAddressesToPhase,m=s.updatePhaseAccessListItem,g=s.generateMercleTreeForPhase,L=s.updatePhase,N=Object(a.useState)(t.users||[]),y=Object(o.a)(N,2),C=y[0],k=y[1],S=Object(a.useState)([]),D=Object(o.a)(S,2),A=(D[0],D[1],Object(a.useState)(new Date)),T=Object(o.a)(A,2),I=(T[0],T[1],Object(a.useState)(new Date)),H=Object(o.a)(I,2),q=(H[0],H[1],Object(a.useCallback)((function(){c(t.index,{address:"",quantity:"",hash:"",id:Object(x.a)()})}),[t,c])),R=Object(a.useCallback)((function(e){n(t.index,e)}),[t,t.accessList,n]),B=Object(a.useCallback)((function(e,s){m(t.index,e,{address:s})}),[t,t.accessList,m]),F=Object(a.useCallback)((function(e,s){m(t.index,e,{quantity:s})}),[t,t.accessList,m]),V=Object(a.useCallback)((function(){g(t.index)}),[C,g]),M=Object(a.useCallback)((function(e,s,a){var c=function(e){var t=e.map((function(e,t){return{address:e[0],quantity:e[1],id:t}}));return isNaN(parseInt(t[0].quantity))&&t.shift(),t}(e);r(t.index,c)}),[k,t,r]);return Object(J.jsxs)(i.a,{children:[Object(J.jsx)("div",{className:"pt-5",children:!!t.warning&&Object(J.jsx)(u.a,{variant:"warning",className:"text-center pointer",children:t.warning})}),Object(J.jsxs)(l.a,{children:[Object(J.jsxs)(d.a,{children:[Object(J.jsxs)("p",{children:["Drop Phase Start Date / ",t.startDate.toLocaleString()]}),Object(J.jsx)(P.a,{selected:t.startDate,showTimeSelect:!0,timeFormat:"HH:mm",onChange:function(e){return L(t.index,{startDate:e})},inline:!0})]}),Object(J.jsxs)(d.a,{children:[Object(J.jsx)("p",{children:"Price in eth"}),Object(J.jsx)(j.a,{type:"number",step:.1,value:t.price,onChange:function(e){var s=e.target;return L(t.index,{price:s.value})}}),t.priceInWei&&Object(J.jsxs)("p",{className:"small",children:["Wei: ",t.priceInWei]})]}),Object(J.jsxs)(d.a,{children:[Object(J.jsx)("p",{children:"Is Public"}),Object(J.jsx)(b.a.Check,{type:"switch",value:t.isPublic,onChange:function(){return L(t.index,{isPublic:!t.isPublic})}})]})]}),!t.isPublic&&Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(w.a,{onFileLoaded:M,parserOptions:E}),Object(J.jsxs)(h.a,{striped:!0,bordered:!0,hover:!0,size:"md",children:[Object(J.jsx)("thead",{className:"address-table-header",children:Object(J.jsxs)("tr",{children:[Object(J.jsx)("th",{children:"#"}),Object(J.jsx)("th",{children:"Address"}),Object(J.jsx)("th",{children:"Access Quantity"}),Object(J.jsx)("th",{children:"Leaf"}),Object(J.jsx)("th",{children:"Hash"})]})}),Object(J.jsx)("tbody",{children:t.accessList.map((function(e,t){var s="";return e.warn&&(s="warning"),Object(J.jsxs)("tr",{children:[Object(J.jsx)("td",{children:t+1}),Object(J.jsx)("td",{className:s,children:Object(J.jsx)("input",{className:"address-input",type:"text",value:e.address,onChange:function(t){return B(e.id,t.target.value)}})}),Object(J.jsx)("td",{children:Object(J.jsx)("input",{type:"number",className:"quantity-input",value:e.quantity,onChange:function(t){return F(e.id,t.target.value)}})}),Object(J.jsx)("td",{className:"break",children:e.leafValue||"-"}),Object(J.jsx)("td",{className:"break",children:e.proof?JSON.stringify(e.proof):"-"}),Object(J.jsx)("td",{className:"text-center",children:Object(J.jsx)(O.a,{icon:p.a,onClick:function(){return R(e.id)},className:"clr pointer"})})]},e.id)}))})]}),Object(J.jsx)("div",{children:Object(J.jsxs)(f.a,{className:"text-center",onClick:q,children:["Add Address",Object(J.jsx)(O.a,{icon:p.b,className:"clr pointer"})]})})]}),Object(J.jsxs)("div",{children:[Object(J.jsxs)("p",{children:["Hash: ",t.rootHash]}),Object(J.jsxs)("p",{children:["Drop Data: ",t.phaseDropStr]})]}),Object(J.jsx)("hr",{className:"clr"}),Object(J.jsx)("div",{className:"text-center",children:Object(J.jsx)(f.a,{onClick:V,className:"generate-btn",children:"Generate"})})]})},M=(s(674),s(693));function z(e){var t=e.phase,s=e.onRemovePhase,c=Object(a.useCallback)((function(){s&&s(t)}),[t,t.index,s]);return Object(J.jsxs)(M.a.Item,{eventKey:t.index,children:[Object(J.jsxs)(M.a.Header,{children:["Drop Phase ",t.index,": ",t.price&&"price: ".concat(t.price),"  ",t.date&&"date: ".concat(t.date),Object(J.jsx)("div",{className:"header-button-group",children:Object(J.jsxs)(f.a,{className:"text-center",variant:"danger",onClick:c,children:["Remove Phase",Object(J.jsx)(O.a,{icon:p.a,className:"mr-4 clr pointer"})]})})]}),Object(J.jsx)(M.a.Body,{children:Object(J.jsx)(V,{phase:t})})]})}function G(){var e=W(),t=e.phases,s=e.phasesData,c=e.onAddPhase,n=e.onRemovePhase,r=e.generateAndSaveJSON,i=Object(a.useCallback)((function(){r()}),[r]);return Object(J.jsxs)(M.a,{children:[t.map((function(e){return Object(J.jsx)(z,{phase:e,onRemovePhase:n})})),Object(J.jsxs)("div",{children:[Object(J.jsxs)(f.a,{className:"text-center",onClick:c,children:["Add Phase",Object(J.jsx)(O.a,{icon:p.b,className:"clr pointer"})]}),Object(J.jsx)(f.a,{onClick:i,className:"save-btn",children:"Save As Json"}),Object(J.jsxs)("p",{children:["Remix data: ",s.dropPhasesRemixStr]})]})]})}var K=function(){return Object(J.jsx)(i.a,{className:"big-container",children:Object(J.jsx)(F,{children:Object(J.jsx)(G,{})})})};r.a.render(Object(J.jsx)(c.a.StrictMode,{children:Object(J.jsx)(K,{})}),document.getElementById("root"))}},[[676,1,2]]]);
//# sourceMappingURL=main.18db5751.chunk.js.map